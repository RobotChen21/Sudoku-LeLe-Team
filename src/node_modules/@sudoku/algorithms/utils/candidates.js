/**
 * Get candidates for an empty cell (1-9 not blocked by row/col/box).
 */
export function getCandidates(grid, x, y) {
	if (grid[y][x] !== 0) return [];

	const used = new Set();

	for (let col = 0; col < 9; col++) {
		if (grid[y][col] !== 0) used.add(grid[y][col]);
	}

	for (let row = 0; row < 9; row++) {
		if (grid[row][x] !== 0) used.add(grid[row][x]);
	}

	const boxX = Math.floor(x / 3) * 3;
	const boxY = Math.floor(y / 3) * 3;
	for (let dy = 0; dy < 3; dy++) {
		for (let dx = 0; dx < 3; dx++) {
			const val = grid[boxY + dy][boxX + dx];
			if (val !== 0) used.add(val);
		}
	}

	const candidates = [];
	for (let n = 1; n <= 9; n++) {
		if (!used.has(n)) candidates.push(n);
	}
	return candidates;
}
